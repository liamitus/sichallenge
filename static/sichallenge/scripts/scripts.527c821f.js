"use strict";angular.module("sichallengeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/upcoming",{templateUrl:"views/upcoming.html",controller:"UpcomingCtrl",controllerAs:"upcoming"}).otherwise({redirectTo:"/"})}]),angular.module("sichallengeApp").controller("MainCtrl",["$filter","$scope","$uibModal","restaurantService",function(a,b,c,d){b.showReservationModal=function(d){var e=a("filter")(b.restaurants,{id:d})[0],f=c.open({animation:!0,templateUrl:"views/restaurantModal.html",controller:"ReservationCtrl",resolve:{restaurant:function(){return e}}});f.result.then(function(){},function(){console.log("Modal dismissed at: "+new Date)})},d.getAll().then(function(a){b.restaurants=a.restaurants})}]),angular.module("sichallengeApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("sichallengeApp").controller("UpcomingCtrl",["$scope","restaurantService",function(a,b){b.getAll().then(function(b){a.restaurants=b.restaurants})}]),angular.module("sichallengeApp").service("reservationService",["$resource",function a(b){var c="/restaurant/:restaurantId/reservation",a=b(c,{restaurantId:"@id"});return{create:function(b){return a.save(b)}}}]),angular.module("sichallengeApp").service("restaurantService",["$resource",function(a){var b=a("/restaurants",{cache:!0});return{getAll:function(){return b.get().$promise}}}]),angular.module("sichallengeApp").controller("ReservationCtrl",["$filter","$scope","$uibModalInstance","reservationService","restaurant",function(a,b,c,d,e){function f(b,c){return a("date")(b,"yyyy-MM-dd")+"T"+c}b.reservation={date:new Date},b.restaurant=e,b.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy"],b.format=b.formats[0],b.altInputFormats=["M!/d!/yyyy"],b.datepicker={opened:!1},b.openDatepicker=function(){b.datepicker.opened=!0},b.makeReservation=function(a){var e=b.reservation,g=f(e.date,a);e.date=new Date(g),d.create(e),c.close()}}]),angular.module("sichallengeApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row restaurants-grid"> <div class="col-sm-4 restaurant" style="background-image: url(\'{{restaurant.image_url}}\')" ng-repeat="restaurant in restaurants" data="{{restaurant.id}}" ng-click="showReservationModal(restaurant.id)"> <div class="restaurant-name">{{restaurant.name}}</div> <div class="gradient-bg"></div> </div><!-- /.restaurant --> </div><!-- /.restaurant-grid -->'),a.put("views/restaurantModal.html",'<div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{restaurant.name}}</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="name">Name</label> <input id="name" type="text" class="form-control" placeholder="What\'s your name?" ng-model="reservation.name"> </div> <div class="form-group"> <label for="size">Party Size</label> <input id="size" type="text" class="form-control" placeholder="How many people?" ng-model="reservation.size"> </div> <div class="form-group"> <label for="date">Date</label> <p class="input-group"> <input id="date" type="text" class="form-control" placeholder="When will you be joining us?" uib-datepicker-popup="{{format}}" ng-model="reservation.date" is-open="datepicker.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openDatepicker()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div> <button class="btn btn-primary" ng-click="makeReservation(\'17:00:00\')">5:00pm</button> <button class="btn btn-primary" ng-click="makeReservation(\'18:00:00\')">6:00pm</button> <button class="btn btn-primary" ng-click="makeReservation(\'19:00:00\')">7:00pm</button> <button class="btn btn-primary" ng-click="makeReservation(\'20:00:00\')">8:00pm</button> <button class="btn btn-primary" ng-click="makeReservation(\'21:00:00\')">9:00pm</button> </div> </div> <!-- /.modal-body --> </div><!-- /.modal-content -->'),a.put("views/upcoming.html",'<div class="row restaurant-grid"> <div class="col-sm-6 restaurant-details" ng-repeat="restaurant in restaurants"> <h2>{{restaurant.name}}</h2> <ul class="row upcoming-reservations-list"> <li class="col-sm-12 upcoming-reservation" ng-repeat="reservation in restaurant.reservations"> {{reservation.date}} - {{reservation.name}} party of {{reservation.size}} </li><!-- /.upcoming-reservation --> </ul><!-- /.reservations-list --> </div><!-- /.restaurant --> </div><!-- /.restaurant-grid -->')}]);